# Password Reset Flow Guide

This document explains the backend flow for the "Forget Password" feature, including API routes, sample requests/responses, and important notes for integration.

---

## 1. Request Password Reset

**Route:** `POST /api/auth/forgot-password`

**Purpose:** Initiate password reset by sending an OTP to the user's email.

**Sample Request:**
```
POST /api/auth/forgot-password
Content-Type: application/json
Body:
{
  "email": "user@example.com"
}
```

**Sample Response:**
```
{
  "success": true,
  "message": "OTP sent to email if account exists"
}
```

**Notes:**
- Always returns success for security, even if the email does not exist.
- If the user exists, an OTP is generated and sent to their email (valid for 5 minutes).

---

## 2. Verify OTP

**Route:** `POST /api/auth/verify-reset-otp`

**Purpose:** Verify the OTP sent to the user's email and generate a password reset token.

**Sample Request:**
```
POST /api/auth/verify-reset-otp
Content-Type: application/json
Body:
{
  "email": "user@example.com",
  "otp": "123456"
}
```

**Sample Response:**
```
{
  "success": true,
  "message": "OTP verified. You may now reset your password. Token expires in 30 minutes.",
  "token": "<resetToken>",
  "expiresInMinutes": 30
}
```

**Notes:**
- If OTP is valid and not expired, a secure reset token is generated (valid for 30 minutes).

---

## 3. Reset Password

**Route:** `POST /api/auth/reset-password`

**Purpose:** Reset the user's password using the reset token.


**Sample Request:**
```
POST /api/auth/reset-password
Content-Type: application/json
Body:
{
  "token": "<resetToken>",
  "password": "NewPassword123!"
}
```

**Sample Response:**
```
{
  "success": true,
  "message": "Password reset successful"
}
```


**Notes:**
- The backend validates the token and expiry, then updates the password and clears reset fields.
- Only one password field is required; frontend should ensure password and confirm password match before sending.

---

## 4. Change Password (Logged-in Users)

**Route:** `POST /api/auth/change-password`

**Purpose:** Change password for authenticated users.

**Sample Request:**
```
POST /api/auth/change-password
Headers: Authorization: Bearer <JWT>
Content-Type: application/json
Body:
{
  "currentPassword": "OldPassword123!",
  "newPassword": "NewPassword123!",
  "confirmPassword": "NewPassword123!"
}
```

**Sample Response:**
```
{
  "success": true,
  "message": "Password changed successfully"
}
```

---

## Important Notes
- All password reset and change flows validate password strength and matching.
- OTP and reset tokens have strict expiry times for security.
- Email is used for OTP delivery; ensure email service is configured.
- Always clear sensitive fields after password reset.

---

For any questions, refer to the backend code or contact the backend developer.
